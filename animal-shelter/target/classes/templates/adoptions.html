<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–£—Å—ã–Ω–æ–≤–ª–µ–Ω–∏—è</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    <nav class="mb-4">
        <a href="/" class="btn btn-secondary">üè† –ì–ª–∞–≤–Ω–∞—è</a>
        <span class="mx-2">|</span>
        <a href="/animals" class="btn btn-outline-primary">üê∂ –ñ–∏–≤–æ—Ç–Ω—ã–µ</a>
        <a href="/adopters" class="btn btn-primary">üë• –£—Å—ã–Ω–æ–≤–∏—Ç–µ–ª–∏</a>
        <a href="/procedures" class="btn btn-outline-primary">üè• –ü—Ä–æ—Ü–µ–¥—É—Ä—ã</a>
        <a href="/adoptions" class="btn btn-outline-primary">üè† –£—Å—ã–Ω–æ–≤–ª–µ–Ω–∏—è</a>
    </nav>

    <h1>üè† –£—Å—ã–Ω–æ–≤–ª–µ–Ω–∏—è –∂–∏–≤–æ—Ç–Ω—ã—Ö</h1>

    <!-- –û—à–∏–±–∫–∞ -->
    <div th:if="${error}" class="alert alert-danger alert-dismissible fade show">
        <span th:text="${error}"></span>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>

    <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
    <div class="card mb-4">
        <div class="card-header bg-success text-white">
            <h5>–û—Ñ–æ—Ä–º–∏—Ç—å —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–µ</h5>
        </div>
        <div class="card-body">
            <form th:action="@{/adoptions/add}" method="post">
                <div class="row g-3">
                    <div class="col-md-4">
                        <label class="form-label">–ñ–∏–≤–æ—Ç–Ω–æ–µ *</label>
                        <select name="animalId" class="form-select" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∂–∏–≤–æ—Ç–Ω–æ–µ...</option>
                            <option th:each="animal : ${animals}"
                                    th:if="${animal.status == '–≥–æ—Ç–æ–≤ –∫ —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏—é'}"
                                    th:value="${animal.id}"
                                    th:text="${animal.name} + ' (' + ${animal.type} + ')'">
                            </option>
                        </select>
                        <small class="text-muted">–¢–æ–ª—å–∫–æ –∂–∏–≤–æ—Ç–Ω—ã–µ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "–≥–æ—Ç–æ–≤ –∫ —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏—é"</small>
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">–£—Å—ã–Ω–æ–≤–∏—Ç–µ–ª—å *</label>
                        <select name="adopterId" class="form-select" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —É—Å—ã–Ω–æ–≤–∏—Ç–µ–ª—è...</option>
                            <option th:each="adopter : ${adopters}"
                                    th:value="${adopter.id}"
                                    th:text="${adopter.lastName} + ' ' + ${adopter.firstName}">
                            </option>
                        </select>
                    </div>

                    <div class="col-md-4">
                        <label class="form-label">–î–∞—Ç–∞ —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏—è *</label>
                        <input type="date" name="adoptionDate"
                               class="form-control"
                               th:value="${#dates.format(#dates.createNow(), 'yyyy-MM-dd')}"
                               required>
                    </div>

                    <div class="col-12">
                        <button type="submit" class="btn btn-success">–û—Ñ–æ—Ä–º–∏—Ç—å —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–µ</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–π -->
    <div class="card">
        <div class="card-header">
            <h5>–ò—Å—Ç–æ—Ä–∏—è —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–π</h5>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>–ñ–∏–≤–æ—Ç–Ω–æ–µ</th>
                        <th>–£—Å—ã–Ω–æ–≤–∏—Ç–µ–ª—å</th>
                        <th>–î–∞—Ç–∞ —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏—è</th>
                        <th>–ö–æ–Ω—Ç–∞–∫—Ç —É—Å—ã–Ω–æ–≤–∏—Ç–µ–ª—è</th>
                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="adoption : ${adoptions}">
                        <td th:text="${adoption.id}"></td>
                        <td>
                            <strong th:text="${adoption.animal.name}"></strong><br>
                            <small class="text-muted" th:text="${adoption.animal.type}"></small>
                        </td>
                        <td>
                            <strong th:text="${adoption.adopter.lastName} + ' ' + ${adoption.adopter.firstName}"></strong><br>
                            <small class="text-muted" th:text="${adoption.adopter.passportData}"></small>
                        </td>
                        <td th:text="${adoption.adoptionDate}"></td>
                        <td th:text="${adoption.adopter.contactData} ?: '‚Äî'"></td>
                        <td>
                            <a th:href="@{/adoptions/edit/{id}(id=${adoption.id})}"
                               class="btn btn-warning btn-sm">‚úèÔ∏è</a>
                            <a th:href="@{/adoptions/delete/{id}(id=${adoption.id})}"
                               class="btn btn-danger btn-sm"
                               onclick="return confirm('–û—Ç–º–µ–Ω–∏—Ç—å —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–µ? –°—Ç–∞—Ç—É—Å –∂–∏–≤–æ—Ç–Ω–æ–≥–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ \"–≥–æ—Ç–æ–≤ –∫ —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏—é\"')">üóëÔ∏è</a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="mt-3">
                <div class="alert alert-info">
                    <strong>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</strong> –í—Å–µ–≥–æ —É—Å—ã–Ω–æ–≤–ª–µ–Ω–∏–π: <span th:text="${adoptions.size()}"></span>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>