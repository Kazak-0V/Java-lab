Казаков Никита ИТ-8 Лабораторная №6
================================================================================================

Задача 1
Текст задачи

@Invoke.  
Разработайте аннотацию @Invoke, со следующими характеристиками: 
• Целью может быть только МЕТОД 
• Доступна во время исполнения программы 
• Не имеет свойств 
Создайте класс, содержащий несколько методов, и проаннотируйте хотя бы один из них 
аннотацией @Invoke. 
Реализуйте обработчик (через Reflection API), который находит методы, отмеченные 
аннотацией @Invoke, и вызывает их автоматически.

Алгоритм решения:

Создать аннотацию @Invoke с @Target(METHOD) и @Retention(RUNTIME)
Создать класс с методами, пометить некоторые @Invoke
Создать обработчик, который через Reflection находит все методы класса
Для каждого метода проверять наличие аннотации @Invoke
Автоматически вызывать методы с аннотацией

Тесты:
Ввод: -
Ожидаемый вывод:
Всего методов: 3
Метод с аннотацией @Invoke
Метод с аннотацией @Invoke
Всего вызвано методов: 2

Вывод программы:
Всего методов: 3
Метод с аннотацией @Invoke
Метод с аннотацией @Invoke
Всего вызвано методов: 2

================================================================================================

Задача 2
Текст задачи
@Default.  
Разработайте аннотацию @Default, со следующими характеристиками: 
• Целью может быть ТИП или ПОЛЕ 
• Доступна во время исполнения программы 
• Имеет обязательное свойство value типа Class 
Проаннотируйте какой-либо класс данной аннотацией, указав тип по умолчанию. 
Напишите обработчик, который выводит имя указанного класса по умолчанию. 

Алгоритм решения:

Создать аннотацию @Default с @Target(TYPE, FIELD) и свойством Class value()
Создать класс, пометить его и одно поле аннотацией @Default
Создать обработчик, который находит аннотации на классе и полях
Вывести типы по умолчанию для класса и полей

Тесты:
Ввод: -
Ожидаемый вывод:
Класс: User
Класс: тип по умолчанию - String
Поле name имеет тип по умолчанию: Integer

Вывод программы:
Класс: User
Класс: тип по умолчанию - String
Поле name имеет тип по умолчанию: Integer

================================================================================================

Задача 3
Текст задачи
@ToString. 
Разработайте аннотацию @ToString, со следующими характеристиками: 
• Целью может быть ТИП или ПОЛЕ 
• Доступна во время исполнения программы 
• Имеет необязательное свойство valuec двумя вариантами значений: YES или NO 
• Значение свойства по умолчанию: YES 
Проаннотируйте класс аннотацией @ToString, а одно из полей – с @ToString(Mode.NO). 
Создайте метод, который формирует строковое представление объекта, учитывая только те поля, 
где @ToString имеет значение YES. 

Алгоритм решения:

Создать аннотацию @ToString с @Target(TYPE, FIELD) и свойством boolean value()
Создать класс Person с полями, пометить некоторые @ToString(true), другие @ToString(false)
Создать обработчик, который генерирует строку только для полей с @ToString(true)
Игнорировать поля с @ToString(false)

Тесты:
1.
Ввод: -

Ожидаемый вывод:
toString (только @ToString(true)):
Person[name=Иван, city=Москва]

Вывод программы:
toString (только @ToString(true)):
Person[name=Иван, city=Москва]

================================================================================================

Задача 4
Текст задачи
@Validate.  
Разработайте аннотацию @Validate, со следующими характеристиками: 
• Целью может быть ТИП или АННОТАЦИЯ 
• Доступна во время исполнения программы 
• Имеет обязательное свойство value, типа Class[] 
Проаннотируйте класс аннотацией @Validate, передав список типов для проверки. 
Реализуйте обработчик, который выводит, какие классы указаны в аннотации. 

Алгоритм решения:

Создать аннотацию @Validate с @Target(TYPE, ANNOTATION_TYPE) и свойством Class[] value()
Создать класс Product, пометить аннотацией с массивом классов
Создать обработчик, который читает массив классов из аннотации
Вывести список классов для проверки

Тесты:
Ввод: -

Ожидаемый вывод:
Анализ класса: Product
Классы для проверки:
-String
-Integer
-Double

Вывод программы:
Анализ класса: Product
Классы для проверки:
-String
-Integer
-Double

================================================================================================

Задача 5
Текст задачи
@Two. 
Разработайте аннотацию @Two, со следующими характеристиками: 
• Целью может быть ТИП 
• Доступна во время исполнения программы 
• Имеет два обязательных свойства: first типа String и second типа int 
Проаннотируйте какой-либо класс аннотацией @Two, передав строковое и числовое значения. 
Реализуйте обработчик, который считывает и выводит значения этих свойств. 

Алгоритм решения:

Создать аннотацию @Two с @Target(TYPE) и двумя свойствами: String first(), int second()
Создать класс Student, пометить аннотацией с конкретными значениями
Создать обработчик, который читает оба свойства из аннотации
Вывести значения обоих свойств

Тесты:
1.
Ввод: -

Ожидаемый вывод:
Анализ класса: Student
Свойство first: Иван
Свойство second: 20

Вывод программы:
Анализ класса: Student
Свойство first: Иван
Свойство second: 20

================================================================================================

Задача 6
Текст задачи
@Cache.  
Разработайте аннотацию @Cache, со следующими характеристиками: 
• Целью может быть ТИП 
• Доступна во время исполнения программы 
• Имеет необязательное свойство value, типа String[] 
• Значение свойства по умолчанию: пустой массив 
Проаннотируйте класс аннотацией @Cache, указав несколько кешируемых областей. 
Создайте обработчик, который выводит список всех кешируемых областей или сообщение, что 
список пуст.

Алгоритм решения:

Создать аннотацию @Cache с @Target(TYPE) и свойством String[] value() default {}
Создать два класса: один с областями кеширования, другой без
Создать обработчик, который проверяет длину массива областей
Если массив не пуст - вывести области, иначе сообщение о пустоте

Тесты:
1.
Ввод: -

Ожидаемый вывод:
Анализ класса: DatabaseService
Кешируемые области:
-users
-products
-orders

Вывод программы:
Анализ класса: DatabaseService
Кешируемые области:

-users
-products
-orders

================================================================================================

Задача 7
Текст задачи
Напишите тест, используя фреймворк JUnit, к методу toString() (или методу, формирующему 
строковое представление объекта, основанное на аннотации @ToString). 
• Проверить, что в результирующей строке отображаются только те поля, которые имеют 
аннотацию @ToString(Mode.YES) или не аннотированы вовсе. 
• Убедиться, что поля с @ToString(Mode.NO) не попадают в вывод. 

Алгоритм решения:

Создать тестовый класс ToStringTest с аннотацией @Test
Создать объект Person для тестирования
Проверить что поля с @ToString(true) есть в результате (assertTrue)
Проверить что поля с @ToString(false) отсутствуют в результате (assertFalse)

Проверить формат строки

Тесты:
Ввод: -

Ожидаемый вывод:
Все тесты проходят (зеленые галочки)

Вывод программы:
 testToStringIncludesYesFields - PASSED
 testToStringExcludesNoFields - PASSED
 testToStringFormat - PASSED

================================================================================================

Задача 8
Текст задачи
Реализовать тест, используя фреймворк JUnit, для класса, использующего аннотацию @Cache. 
• Проверить, что список кешируемых сущностей (value) корректно считывается. 
• Реализовать мок-тест (с использованием Mockito или встроенных подстановок), 
имитирующий обращение к кешу. 
• Проверить, что если массив пуст – кеширование не производится. 
• Добавить отдельный тест для случая, когда кеш содержит несколько именованных 
областей. 

Алгоритм решения:

Создать тестовый класс CacheTest с аннотацией @Test
Проверить что аннотация @Cache правильно читает массив областей
Проверить обработку пустого массива
Проверить отсутствие аннотации
Имитировать обращение к кешу через цикл поиска области

Тесты:
Ввод: -

Ожидаемый вывод:
Все тесты проходят (зеленые галочки) кроме одного 

Вывод программы:
 testCacheWithMultipleAreas - PASSED
 testEmptyCacheArray - PASSED
 testNoCacheAnnotation - FAILED
 testCacheAccessSimulation - PASSED
 testNoCachingForEmptyArray - PASSED

================================================================================================

